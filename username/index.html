<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>Username</title>
    <meta name="description" content="Create your unique username using random letter pairs."/>
    <link rel="preconnect" href="https://fonts.gstatic.com"/>
    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap"/>
    <style>
        :root{--hue:220}
        :root{
            color-scheme: light;
            --background:hsl(var(--hue) 80% 96%);
            --foreground:hsl(var(--hue) 80% 32%);
            --paragraph:hsl(var(--hue) 36% 48%);
            --label:hsl(var(--hue) 32% 24%);
            --input:hsl(var(--hue) 100% 93%);
            --input-hover:hsl(var(--hue) 80% 91%);
            --input-focus:hsl(var(--hue) 80% 97%);
            --input-active:hsl(var(--hue) 80% 95%);
            --input-border:hsl(var(--hue) 80% 80%);
            --input-color:hsl(var(--hue) 32% 36%);
            --button-primary:hsl(var(--hue) 80% 50%);
            --button-primary-hover:hsl(var(--hue) 80% 45%);
            --button-primary-focus:hsl(var(--hue) 80% 40%);
            --button-primary-active:hsl(var(--hue) 80% 32%);
            --button-primary-color:hsl(var(--hue) 80% 100%);
            --button-secondary:hsl(var(--hue) 80% 93%);
            --button-secondary-hover:hsl(var(--hue) 80% 91%);
            --button-secondary-focus:hsl(var(--hue) 80% 97%);
            --button-secondary-active:hsl(var(--hue) 80% 99%);
            --button-secondary-color:hsl(var(--hue) 80% 36%);
            --shadow-20:hsl(var(--hue) 80% 36% / 20%);
            --shadow-14:hsl(var(--hue) 80% 36% / 14%);
            --shadow-12:hsl(var(--hue) 80% 36% / 12%)
        }
        .dark{
            color-scheme: dark;
            --background:hsl(var(--hue) 12% 12%);
            --foreground:hsl(var(--hue) 80% 96%);
            --paragraph:hsl(var(--hue) 24% 80%);
            --label:hsl(var(--hue) 24% 85%);
            --input:hsl(var(--hue) 16% 16%);
            --input-hover:hsl(var(--hue) 12% 20%);
            --input-focus:hsl(var(--hue) 12% 24%);
            --input-active:hsl(var(--hue) 12% 28%);
            --input-border:hsl(var(--hue) 12% 32%);
            --input-color:hsl(var(--hue) 24% 75%);
            --button-primary:hsl(var(--hue) 48% 48%);
            --button-primary-hover:hsl(var(--hue) 48% 45%);
            --button-primary-focus:hsl(var(--hue) 48% 40%);
            --button-primary-active:hsl(var(--hue) 48% 32%);
            --button-primary-color:hsl(var(--hue) 48% 100%);
            --button-secondary:hsl(var(--hue) 24% 16%);
            --button-secondary-hover:hsl(var(--hue) 24% 20%);
            --button-secondary-focus:hsl(var(--hue) 24% 24%);
            --button-secondary-active:hsl(var(--hue) 24% 28%);
            --button-secondary-color:hsl(var(--hue) 24% 64%);
            --shadow-20:hsl(var(--hue) 10% 3% / 20%);
            --shadow-14:hsl(var(--hue) 10% 3% / 14%);
            --shadow-12:hsl(var(--hue) 10% 3% / 12%)
        }
        *{font-family:"Inter",sans-serif}
        *,::after,::before{box-sizing:inherit}
        html{background-color:var(--background);block-size:100%;box-sizing:border-box;color:var(--foreground);font-style:normal;font-weight:400;line-height:1.2;word-wrap:break-word}
        body{margin:0;min-block-size:100%}
        main{margin:0 auto;max-width:1440px;min-height:100vh}
        footer,section,aside{padding:24px 16px}
        form,main{display:grid}
        nav{position:fixed;z-index:3}
        aside{background-color:var(--background);bottom:0;left:0;max-height:100vh;overflow-y:scroll;position:fixed;right:0;top:0;z-index:2}
        @media screen and (min-width:768px) and (min-height:480px){
            main{grid-template-columns:repeat(2,1fr)}
            nav{right:86px;top:32px}
            footer{max-height:100vh;overflow-y:scroll}
            footer,section,aside{padding:32px 24px}
            aside{left:50%;max-width:50%}
            body[focus] footer{overflow:hidden}
        }
        @media screen and (max-width:768px){
            nav{left:8px;top:8px}
            section,aside{padding-top:64px}
            button[type=button]{background-color:var(--background)}
        }
        h1,h2{color:var(--foreground);font-size:32px;font-weight:700;line-height:1.2;margin:0 0 8px}
        p{color:var(--paragraph);font-size:16px;margin:8px 0}
        form{gap:20px;grid-gap:20px;margin-top:32px}
        label{color:var(--label);cursor:default}
        input{background-color:var(--input);border:1px solid var(--input-border);border-radius:4px;display:block;margin-top:8px;min-height:48px;padding:12px 16px}
        input:hover{background-color:var(--input-hover)}
        input:focus{background-color:var(--input-focus)}
        input::-webkit-inner-spin-button,input::-webkit-outer-spin-button{appearance:none;margin:0}
        input,input::placeholder{color:var(--input-color);font-size:14px}
        button{-webkit-tap-highlight-color:hsl(0 0% 0%/0%);align-items:center;appearance:none;background-color:hsl(0 0% 0%/0%);border:0;color:currentColor;cursor:pointer;display:inline-flex;font-size:14px;font-weight:500;justify-content:center;min-height:40px;text-align:center;text-decoration:none}
        nav,.group-button,.group-input,ol,ul,.item{display:flex}
        button[type=submit]{flex:auto;margin-left:16px}
        ol,ul{flex-direction:column;list-style-type:none;padding-inline:0;margin:0}
        h2+ul>li:first-of-type{border-top:1px solid var(--input-border);margin-top:10px;padding-top:16px}
        li{font-size:32px;font-weight:700;line-height:1.2;outline:0;padding-bottom:16px}
        label,button,input{outline:0;user-select:none}
        button[type=submit],button[type=reset]{border-radius:4px;padding:10px 25px}
        button[type=submit]{background-color:var(--button-primary);color:var(--button-primary-color)}
        button[type=submit]:hover{background-color:var(--button-primary-hover)}
        button[type=submit]:focus{background-color:var(--button-primary-focus)}
        button[type=submit]:active{background-color:var(--button-primary-active)}
        button[type=reset]{background-color:var(--button-secondary);color:var(--button-secondary-color)}
        button[type=reset]:hover,button[type=button]:hover{background-color:var(--button-secondary-hover)}
        button[type=reset]:focus,button[type=button]:focus{background-color:var(--button-secondary-focus)}
        button[type=reset]:active,button[type=button]:focus{background-color:var(--button-secondary-active)}
        button[type=button]{border-radius:50%;color:var(--button-secondary-color);min-width:40px}
        button:focus,input:focus{box-shadow:0 2px 1px -2px var(--shadow-20),0 2px 2px 0 var(--shadow-14),0 1px 5px 0 var(--shadow-12)}
        button,input{transition:box-shadow,background-color 200ms cubic-bezier(0,0,.2,1)}
        body[focus]{overflow:hidden}
        @media screen and (min-width:650px) and (min-height:480px){
            p{max-width:340px}
            .group-button,.group-input{max-width:360px}
        }
        .group-input{flex-direction:column}
        .group-button{flex-direction:row}
        .item::before{content:"@";pointer-events:none}
        .item:not(:first-of-type){padding-top:16px}
        .item:not(:last-of-type){border-bottom:1px solid var(--input-border)}
        .item:not(:first-of-type):not(:focus){opacity:.48}
        .list:hover>.item{opacity:.36;transition:opacity 200ms cubic-bezier(0,0,.2,1)}
        .list:hover>.item:hover,.list:hover>.item:focus,.list:hover>.item:active{opacity:1}
        .item>.name{flex:auto}
    </style>
    <script>(function(c,a){var b=new URLSearchParams(c.location.search);b.has("hue")&&(a.documentElement.style="--hue:"+b.get("hue"));"dark"==b.get("theme")&&a.documentElement.classList.add("dark");"light"==b.get("theme")&&a.documentElement.hasAttribute("class")&&a.documentElement.removeAttribute("class")})(window,document)</script>
</head>
<body>
    <main>
        <nav>
            <button aria-label="Open menu" class="toogle-menu" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
            </button>
        </nav>
        <section>
            <h1>Get your unique username.</h1>
            <p>Stop deep thinking to find your ideal name, put your data on these field, and enjoy!</p>
            <form action id="form" method="get" target="_self">
                <div class="group-input">
                    <label for="username">What's your username?</label>
                    <input id="username" minlength="3" name="u" placeholder="Your complete name" required title="Name" type="text" value/>
                </div>
                <div class="group-input">
                    <label for="lenght">How long your username?</label>
                    <input id="lenght" min="3" max="12" name="s" placeholder="Number of lenght" required title="Number" type="number" value/>
                </div>
                <div class="group-input">
                    <label for="special">Your shortname if you needed.</label>
                    <input id="special" minlength="2" maxlength="6" name="x" placeholder="Special" title="Shortname" type="text" value/>
                </div>
                <div class="group-button">
                    <button type="reset">Reset</button>
                    <button type="submit">Submit</button>
                </div>
            </form>
        </section>
        <footer>
            <ul aria-hidden="true" class="list" id="result"></ul>
        </footer>
    </main>
    <script>
        (function(window, document){
            const createElement = (el,parent,prepend=false)=>{const {nodeName="div",...attrs }=el;const element=document.createElement(nodeName);Object.entries(attrs).forEach(([attr,value])=>{element[attr]=value});if(prepend){parent.prepend(element)}else{parent.append(element)};return element};
            const removeElement = (str)=>{return [].slice.call(document.querySelectorAll(str)).map(el => el.remove())};
            const formatSlug = (str)=>{return str.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"").replace(/^-+|-+$/g,"");return str};

            const data = {
                form: "#form",
                user: "#username",
                size: "#lenght",
                special: "#special",
                history: "#result",
                addFavorite: "Save to favorite",
                removeFavorite: "Remove from favorite"
            };
            const _form = document.querySelector(data.form);
            const _user = _form.querySelector(data.user);
            const _size = _form.querySelector(data.size);
            const _special = _form.querySelector(data.special);
            const _history = document.querySelector(data.history);

            const iconFavorite = `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>`;
            const iconFavoriteBorder = `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55l-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"/></svg>`;
            const iconMenu = `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>`;
            const iconClose = `<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>`;

            const favorite = window.localStorage.getItem("favorite");
            const collection = favorite ? JSON.parse(favorite) : [];

            const result = (e)=>{e.preventDefault();
                const input = Object.assign([],formatSlug(_user.value));
                const name = [...new Set(input)];
                const expected = [];
                const random = ()=>{const index=Math.floor(Math.random()*name.length);expected.push(name[index])};
                if(_special.value){expected.push(_special.value);for(let i=0;i<(_size.value-_special.value.length);i++){random()}}
                else{for(let i=0;i<_size.value;i++){random()}};
                const username = expected.join("");

                const listItem = createElement({nodeName:"li",id:formatSlug(username),className:"item",tabIndex:"0"},_history,true);
                const listName = createElement({nodeName:"span",textContent:username,className:"name"},listItem,true);
                const btnSave = createElement({nodeName:"button",ariaLabel:data.addFavorite,tabIndex:"-1",type:"button",innerHTML:iconFavoriteBorder},listItem,false);

                const addFavorite = (e)=>{e.preventDefault();
                    collection.push(username);
                    const collect = [...new Set(collection)].reverse();
                    window.localStorage.setItem("favorite",JSON.stringify(collect));
                    btnSave.innerHTML = iconFavorite;
                    btnSave.setAttribute("aria-label",data.removeFavorite);
                    btnSave.removeEventListener("click",addFavorite,false);
                    btnSave.addEventListener("click",removeFavorite,false);
                };
                const removeFavorite = (e)=>{e.preventDefault();
                    for(let i=0;i<collection.length;i++){if(collection[i]===username){collection.splice(i,1)}};
                    window.localStorage.setItem("favorite",JSON.stringify(collection));
                    btnSave.innerHTML = iconFavoriteBorder;
                    btnSave.setAttribute("aria-label",data.addFavorite);
                    btnSave.removeEventListener("click",removeFavorite,false);
                    btnSave.addEventListener("click",addFavorite,false);
                    removeElement("#"+username);
                };
                btnSave.addEventListener("click",addFavorite,false);
                
                for(let i=0;i<collection.length;i++){
                    if(collection[i]===username){
                        btnSave.innerHTML = iconFavorite;
                        btnSave.removeEventListener("click",addFavorite,false);
                        btnSave.addEventListener("click",removeFavorite,false);
                    }
                    else{
                        btnSave.innerHTML = iconFavoriteBorder;
                        btnSave.removeEventListener("click",removeFavorite,false);
                        btnSave.addEventListener("click",addFavorite,false);
                    }
                };

                (_history.getAttribute("aria-hidden") == "true") && (_history.setAttribute("aria-hidden","false"));
            };
            const reset = (e)=>{e.preventDefault();
                _user.value = "";
                _size.value = "";
                _special.value = "";
                _history.innerHTML = "";
                _history.setAttribute("aria-hidden","true");
                window.location.reload();
            };
            _form.addEventListener("submit",result,false);
            _form.addEventListener("reset",reset,false);

            const menu = {
                toogle: ".toogle-menu",
                toOpen: "Open menu",
                toClose: "Close menu",
                title: "Favorites"
            };
            const btnMenu = document.querySelector(menu.toogle);
            const openMenu = (e)=>{e.preventDefault();
                btnMenu.innerHTML = iconClose;
                btnMenu.setAttribute("aria-label",menu.toClose);
                btnMenu.removeEventListener("click",openMenu,false);
                btnMenu.addEventListener("click",closeMenu,false);
                const drawer = createElement({nodeName:"aside"},document.body,false);
                const title = createElement({nodeName:"h2",textContent:menu.title},drawer,true);
                const list = createElement({nodeName:"ul",className:"list"},drawer,false);
                collection.map((username)=>{                    
                    const listItem = createElement({nodeName:"li",id:formatSlug(username),className:"item",tabIndex:"0"},list,true);
                    const listName = createElement({nodeName:"span",textContent:username,className:"name"},listItem,true);
                    const btnSave = createElement({nodeName:"button",ariaLabel:data.addFavorite,tabIndex:"-1",type:"button",innerHTML:iconFavorite},listItem,false);
                    const removeFavorite = (e)=>{e.preventDefault();
                        for(let i=0;i<collection.length;i++){if(collection[i]===username){collection.splice(i,1)}};
                        window.localStorage.setItem("favorite",JSON.stringify(collection));
                        btnSave.innerHTML = iconFavoriteBorder;
                        btnSave.removeEventListener("click",removeFavorite,false);
                        removeElement("#"+username);
                        listItem.remove();
                    };
                    btnSave.addEventListener("click",removeFavorite,false);
                });
                document.body.setAttribute("focus","");
            };
            const closeMenu = (e)=>{e.preventDefault();
                btnMenu.innerHTML = iconMenu;
                btnMenu.setAttribute("aria-label",menu.toOpen);
                btnMenu.removeEventListener("click",closeMenu,false);
                btnMenu.addEventListener("click",openMenu,false);
                document.body.querySelector("aside").remove();
                document.body.removeAttribute("focus");
            };
            btnMenu.addEventListener("click",openMenu,false);
        })(window, document);
    </script>
</body>
</html>
